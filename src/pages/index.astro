---
import Layout from "../layouts/Layout.astro";
import Main from "../components/Main.astro";
import Benefits from "../components/Benefits.astro";
import Reasons from "../components/Reasons.astro";
import Media from "../components/Media.astro";
import PopUp from "../shared/components/Modal.astro";
import { MODAL_DATA } from "../shared/data/modal_data";
import "../styles/reset.css";

const country =
  Astro.request.headers.get('x-vercel-ip-country') ?? 'UNKNOWN';
const isBY = country === 'BY';

---

<script>
  fetch('https://api64.ipify.org?format=json')
    .then(r => r.json())
    .then(data => {
      console.log('Client IP:', data.ip);
    });
  const isBY = Astro.request.headers.get('x-vercel-ip-country')
  console.log('COUNTRY',isBY);
</script>

<Layout>
  <div>Country{country}</div>
  <PopUp id={MODAL_DATA.CONTACT_MODAL_ID} />
  <Main />
  <Benefits />
  <Reasons />
  <Media />
</Layout>

<script>
  import { MODAL_DATA } from "../shared/data/modal_data";

  const modalElement = document.querySelector(
    `#${MODAL_DATA.CONTACT_MODAL_ID}`
  );
  modalElement?.addEventListener("close", () => {
    document.body.style.overflow = "auto";
  });
</script>
